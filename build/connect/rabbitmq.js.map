{"version":3,"sources":["../../src/connect/rabbitmq.js"],"names":["queue","TypeError","join","has","get","url","other","connect"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAKA;;;;kBAIe,YAA2C;AAAA,iFAAP,EAAO;AAAA,wBAAxCA,KAAwC;AAAA,MAAxCA,KAAwC;;AACxD,MAAI,CAAC,sBAASA,KAAT,CAAD,IAAoB,CAAC,sBAAcA,KAAd,CAAzB,EAA+C;AAC7C,UAAM,IAAIC,SAAJ,CAAc,CAClB,wDADkB,EAElB,oDAFkB,EAGlB,wHAHkB,EAIlBC,IAJkB,CAIb,IAJa,CAAd,CAAN;AAKD;;AAPuD,cAYpD,sBAAcF,KAAd,IAAuBA,KAAvB,GAA+B,iBAAOG,GAAP,CAAWH,KAAX,IAAoB,iBAAOI,GAAP,CAAWJ,KAAX,CAApB,GAAwC,EAZnB;AAAA,wBAUtDK,GAVsD;AAAA,MAUtDA,GAVsD;AAAA,MAWnDC,KAXmD;;AAcxD,SAAO,kBAAWC,OAAX,CAAmBF,GAAnB,eAA6BC,KAA7B,EAAP;AACD,C","file":"rabbitmq.js","sourcesContent":["import config from 'config';\nimport middleware from \"amqplib\";\nimport isString from 'lodash.isstring';\nimport isPlainObject from 'lodash.isplainobject';\nimport {\n  CONFIG_SECTION_QUEUE,\n  QUEUE_OPTIONS_HOST\n} from '../constants';\n\n/**\n * @param {string|object} [queue]=CONFIG_SECTION_QUEUE\n * @returns {*}\n */\nexport default ({ queue = CONFIG_SECTION_QUEUE } = {}) => {\n  if (!isString(queue) && !isPlainObject(queue)) {\n    throw new TypeError([\n      'Настройки для соединения с RabbitMQ могут быть только:',\n      '- {string} -> название имени ключа из конфигурации',\n      '- {object} -> объектом с настройками @see # Пример url: http://www.squaremobius.net/amqp.node/channel_api.html#connect',\n    ].join('\\n'))\n  }\n\n  const {\n    url = QUEUE_OPTIONS_HOST,\n    ...other\n  } = isPlainObject(queue) ? queue : config.has(queue) ? config.get(queue) : {};\n\n  return middleware.connect(url, { ...other });\n}"]}